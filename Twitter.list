# NAME: Twitter & X (Enhanced Protection Version)
# UPDATED: 2026-02-05
# 策略建议：推荐固定使用【美国】或【日本】节点，防封号效果最佳

# --- 1. 核心域名 (X / Twitter) ---
DOMAIN-SUFFIX,x.com
DOMAIN-SUFFIX,twitter.com
DOMAIN-SUFFIX,t.co
DOMAIN-SUFFIX,twimg.com
DOMAIN-SUFFIX,periscope.tv
DOMAIN-SUFFIX,pscp.tv

# --- 2. 辅助与品牌更名补丁 ---
DOMAIN-SUFFIX,twimg.co
DOMAIN-SUFFIX,twimg.org
DOMAIN-SUFFIX,twttr.com
DOMAIN-SUFFIX,twttr.net
DOMAIN-SUFFIX,x-twitter.com
DOMAIN-SUFFIX,twittercloud.net

# --- 3. 广告、数据与 API (App 正常运行必需) ---
DOMAIN-SUFFIX,ads-twitter.com
DOMAIN-SUFFIX,cms-twdigitalassets.com
DOMAIN-SUFFIX,twitter.biz
DOMAIN-SUFFIX,twittercommunity.com
DOMAIN-SUFFIX,twitterflightschool.com
DOMAIN-SUFFIX,twitterinc.com
DOMAIN-SUFFIX,twitteroauth.com
DOMAIN-SUFFIX,twitterstat.us
DOMAIN-SUFFIX,twtrdns.net
DOMAIN-SUFFIX,tellapart.com
DOMAIN-SUFFIX,vine.co
DOMAIN-SUFFIX,crashlytics.com      # Twitter 崩溃分析（App 启动时常调用）

# --- 4. 关键字兜底 ---
DOMAIN-KEYWORD,twitter
DOMAIN-KEYWORD,twimg

# --- 5. 进程匹配 (针对 Android/iOS 客户端) ---
PROCESS-NAME,com.twitter.android
PROCESS-NAME,com.twitter.android.lite
PROCESS-NAME,com.atebits.tweetie2
PROCESS-NAME,com.twitter.android.tv

# --- 6. 核心 IP 段补丁 (解决 199.16.158.182 漏网问题) ---
# 注意：仅当 behavior 为 classical 时生效。若为 domain 请删除本段并将 IP 写在 YAML 的 rules 中。
# 覆盖 Twitter 绝大部分核心数据中心
IP-CIDR,199.16.156.0/22,no-resolve
IP-CIDR,199.59.148.0/22,no-resolve
IP-CIDR,199.96.56.0/21,no-resolve
IP-CIDR,204.92.112.0/22,no-resolve
IP-CIDR,104.244.42.0/21,no-resolve
IP-CIDR,69.195.160.0/19,no-resolve

# --- 7. 地理识别 (作为最后防线) ---
GEOIP,TWITTER,no-resolve
